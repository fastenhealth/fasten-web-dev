"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{717:(t,e,i)=>{i.d(e,{C:()=>tn,P:()=>s,T:()=>d,V:()=>$,a:()=>L,b:()=>g,c:()=>r,d:()=>c,e:()=>u,f:()=>o,g:()=>h,h:()=>m,i:()=>W,j:()=>Y,p:()=>j,r:()=>X,t:()=>I,u:()=>D});let r={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5};class s extends Error{code;line;constructor(t){super(t.reason),this.code=t.code,this.line=t.line}}let n=/\r?\n|\r/gm;class l{writable;readable;constructor(t){let e=new a(t);this.writable=new WritableStream({write(t){e.transform(t)},close(){e.close()}}),this.readable=new ReadableStream({start(t){e.onLine=e=>t.enqueue(e),e.onClose=()=>t.close()}})}}class a{a="";b;onLine;onClose;constructor(t){this.b=new TextDecoder(t)}transform(t){this.a+=this.b.decode(t,{stream:!0});let e=this.a.split(n);this.a=e.pop()||"";for(let t=0;t<e.length;t++)this.onLine(e[t].trim())}close(){this.a&&this.onLine(this.a.trim()),this.a="",this.onClose()}}async function o(t,e){return h(new ReadableStream({start(e){for(let i of t.split(n))e.enqueue(i);e.close()}}),e)}async function h(t,e){let r,s,n=e?.type??"vtt";if("string"==typeof n)switch(n){case"srt":r=(await i.e(566).then(i.bind(i,2566))).default;break;case"ssa":case"ass":r=(await i.e(308).then(i.bind(i,4308))).default;break;default:r=(await Promise.resolve().then(function(){return S})).default}else r=n;let l=t.getReader(),a=r(),o=!!e?.strict||!!e?.errors;await a.init({strict:!1,...e,errors:o,type:n,cancel(){l.cancel(),s=a.done(!0)}});let h=1;for(;;){let{value:t,done:e}=await l.read();if(e){a.parse("",h),s=a.done(!1);break}a.parse(t,h),h++}return s}async function c(t,e){let i=await t;if(!i.ok||!i.body)return{metadata:{},cues:[],regions:[],errors:[void 0]};let r=i.headers.get("content-type")||"",s=r.match(/text\/(.*?)(?:;|$)/)?.[1],n=r.match(/charset=(.*?)(?:;|$)/)?.[1];return u(i.body,{type:s,encoding:n,...e})}async function u(t,{encoding:e="utf-8",...i}={}){return h(t.pipeThrough(new l(e)),i)}class d extends EventTarget{id="";startTime;endTime;text;pauseOnExit=!1;constructor(t,e,i){super(),this.startTime=t,this.endTime=e,this.text=i}addEventListener(t,e,i){super.addEventListener(t,e,i)}removeEventListener(t,e,i){super.removeEventListener(t,e,i)}}let f="undefined"==typeof document,p=f?d:window.VTTCue;class g extends p{region=null;vertical="";snapToLines=!0;line="auto";lineAlign="start";position="auto";positionAlign="auto";size=100;align="center";style}class m{id="";width=100;lines=3;regionAnchorX=0;regionAnchorY=100;viewportAnchorX=0;viewportAnchorY=100;scroll=""}function b(t){let e=parseInt(t.replace("%",""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function w(t){if(!t.includes(","))return null;let[e,i]=t.split(",").map(b);return null!==e&&null!==i?[e,i]:null}let v=/[:=]/,y=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,T=/^REGION:?[\s\t]+/,k=/[\s\t]+/,x=/[\s\t]*-->[\s\t]+/,A=/start|center|end|left|right/,C=/start|center|end/,E=/line-(?:left|right)|center|auto/,N=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/;var L=(t=>(t[t.None=0]="None",t[t.Header=1]="Header",t[t.Cue=2]="Cue",t[t.Region=3]="Region",t[t.Note=4]="Note",t))(L||{});class ${h;e=0;i={};j={};l=[];c=null;d=null;m=[];f;n="";async init(t){this.h=t,t.strict&&(this.e=1),t.errors&&(this.f=(await i.e(804).then(i.bind(i,1804))).ParseErrorBuilder)}parse(t,e){if(""===t)this.c?(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null):this.d?(this.j[this.d.id]=this.d,this.h.onRegion?.(this.d),this.d=null):1===this.e&&(this.k(t,e),this.h.onHeaderMetadata?.(this.i)),this.e=0;else if(this.e)switch(this.e){case 1:this.k(t,e);break;case 2:if(this.c){let i=this.c.text.length>0;!i&&y.test(t)?this.o(t.split(k),e):this.c.text+=(i?"\n":"")+t}break;case 3:this.p(t.split(k),e)}else if(t.startsWith("NOTE"))this.e=4;else if(t.startsWith("REGION"))this.e=3,this.d=new m,this.p(t.replace(T,"").split(k),e);else if(t.includes("--\x3e")){let i=this.q(t,e);i&&(this.c=new g(i[0],i[1],""),this.c.id=this.n,this.o(i[2],e)),this.e=2}else 1===e&&this.k(t,e);this.n=t}done(){return{metadata:this.i,cues:this.l,regions:Object.values(this.j),errors:this.m}}k(t,e){if(e>1){if(v.test(t)){let[e,i]=t.split(v);e&&(this.i[e]=(i||"").replace(k,""))}}else t.startsWith("WEBVTT")?this.e=1:this.g(this.f?.r())}q(t,e){let[i,r=""]=t.split(x),[s,...n]=r.split(k),l=j(i),a=j(s);if(null!==l&&null!==a&&a>l)return[l,a,n];null===l&&this.g(this.f?.s(i,e)),null===a&&this.g(this.f?.t(s,e)),null!=l&&null!==a&&a>l&&this.g(this.f?.u(l,a,e))}p(t,e){let i;for(let r=0;r<t.length;r++)if(v.test(t[r])){i=!1;let[s,n]=t[r].split(v);switch(s){case"id":this.d.id=n;break;case"width":let l=b(n);null!==l?this.d.width=l:i=!0;break;case"lines":let a=function(t){let e=parseInt(t,10);return Number.isNaN(e)?null:e}(n);null!==a?this.d.lines=a:i=!0;break;case"regionanchor":let o=w(n);null!==o?(this.d.regionAnchorX=o[0],this.d.regionAnchorY=o[1]):i=!0;break;case"viewportanchor":let h=w(n);null!==h?(this.d.viewportAnchorX=h[0],this.d.viewportAnchorY=h[1]):i=!0;break;case"scroll":"up"===n?this.d.scroll="up":i=!0;break;default:this.g(this.f?.v(s,n,e))}i&&this.g(this.f?.w(s,n,e))}}o(t,e){let i;for(let r=0;r<t.length;r++)if(i=!1,v.test(t[r])){let[s,n]=t[r].split(v);switch(s){case"region":let l=this.j[n];l&&(this.c.region=l);break;case"vertical":"lr"===n||"rl"===n?(this.c.vertical=n,this.c.region=null):i=!0;break;case"line":let[a,o]=n.split(",");if(a.includes("%")){let t=b(a);null!==t?(this.c.line=t,this.c.snapToLines=!1):i=!0}else{let t=function(t){let e=parseFloat(t);return Number.isNaN(e)?null:e}(a);null!==t?this.c.line=t:i=!0}C.test(o)?this.c.lineAlign=o:o&&(i=!0),"auto"!==this.c.line&&(this.c.region=null);break;case"position":let[h,c]=n.split(","),u=b(h);null!==u?this.c.position=u:i=!0,c&&E.test(c)?this.c.positionAlign=c:c&&(i=!0);break;case"size":let d=b(n);null!==d?(this.c.size=d,d<100&&(this.c.region=null)):i=!0;break;case"align":A.test(n)?this.c.align=n:i=!0;break;default:this.g(this.f?.x(s,n,e))}i&&this.g(this.f?.y(s,n,e))}}g(t){if(t){if(this.m.push(t),this.h.strict)throw this.h.cancel(),t;this.h.onError?.(t)}}}function j(t){let e=t.match(N);if(!e)return null;let i=e[1]?parseInt(e[1],10):0,r=parseInt(e[2],10),s=parseInt(e[3],10),n=e[4]?parseInt(e[4].padEnd(3,"0"),10):0;return i<0||r<0||s<0||n<0||r>59||s>59?null:3600*i+60*r+s+n/1e3}var S=Object.freeze({__proto__:null,VTTBlock:L,VTTParser:$,default:function(){return new $},parseVTTTimestamp:j});let z=/[0-9]/,M=/[\s\t]+/,V={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},B={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xa0","&lrm;":"‎","&rlm;":"‏"},H=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,R=new Set(["white","lime","cyan","red","yellow","magenta","blue","black"]),F=new Set(Object.keys(V));function I(t){let e="",i=1,r=[],s=[],n;for(let r=0;r<t.text.length;r++){let h=t.text[r];switch(i){case 1:"<"===h?(o(),i=2):e+=h;break;case 2:switch(h){case"\n":case"	":case" ":l(),i=4;break;case".":l(),i=3;break;case"/":i=5;break;case">":l(),i=1;break;default:!e&&z.test(h)&&(i=6),e+=h}break;case 3:switch(h){case"	":case" ":case"\n":a(),n&&n.class?.trim(),i=4;break;case".":a();break;case">":a(),n&&n.class?.trim(),i=1;break;default:e+=h}break;case 4:">"===h?(e=e.replace(M," "),n?.type==="v"?n.voice=O(e):n?.type==="lang"&&(n.lang=O(e)),e="",i=1):e+=h;break;case 5:">"===h&&(e="",n=s.pop(),i=1);break;case 6:if(">"===h){let r=j(e);null!==r&&r>=t.startTime&&r<=t.endTime&&(e="timestamp",l(),n.time=r),e="",i=1}else e+=h}}function l(){if(F.has(e)){var t;let i=n;n={tagName:V[t=e],type:t,children:[]},i?(s[s.length-1]!==i&&s.push(i),i.children.push(n)):r.push(n)}e="",i=1}function a(){if(n&&e){let t=e.replace("bg_","");R.has(t)?n[e.startsWith("bg_")?"bgColor":"color"]=t:n.class=n.class?n.class+" "+e:e}e=""}function o(){if(!e)return;let t={type:"text",data:O(e)};n?n.children.push(t):r.push(t),e=""}return 1===i&&o(),r}function O(t){return t.replace(H,t=>B[t]||"'")}function P(t,e,i){t.style.setProperty(`--${e}`,i+"")}function _(t,e,i=!0){t.setAttribute(`data-${e}`,!0===i?"":i+"")}function q(t,e){t.setAttribute("data-part",e)}function W(t){if(f)throw Error("[media-captions] called `createVTTCueTemplate` on the server - use `renderVTTCueString`");let e=document.createElement("template");return e.innerHTML=X(t),{cue:t,content:e.content}}function X(t,e=0){return Y(I(t),e)}function Y(t,e=0){let i,r="";for(let s of t)if("text"===s.type)r+=s.data;else{let t="timestamp"===s.type;(i={}).class=s.class,i.title="v"===s.type&&s.voice,i.lang="lang"===s.type&&s.lang,i["data-part"]="v"===s.type&&"voice",t&&(i["data-part"]="timed",i["data-time"]=s.time,i["data-future"]=s.time>e,i["data-past"]=s.time<e),i.style=`${s.color?`color: ${s.color};`:""}${s.bgColor?`background-color: ${s.bgColor};`:""}`;let n=Object.entries(i).filter(t=>t[1]).map(t=>`${t[0]}="${!0===t[1]?"":t[1]}"`).join(" ");r+=`<${s.tagName}${n?" "+n:""}>${Y(s.children)}</${s.tagName}>`}return r}function D(t,e){if(!f)for(let i of t.querySelectorAll('[data-part="timed"]')){let t=Number(i.getAttribute("data-time"));Number.isNaN(t)||(t>e?_(i,"future"):i.removeAttribute("data-future"),t<e?_(i,"past"):i.removeAttribute("data-past"))}}let G=Symbol(0);function J(t){return t instanceof HTMLElement?{top:t.offsetTop,width:t.clientWidth,height:t.clientHeight,left:t.offsetLeft,right:t.offsetLeft+t.clientWidth,bottom:t.offsetTop+t.clientHeight}:{...t}}function K(t,e,i){switch(e){case"+x":t.left+=i,t.right+=i;break;case"-x":t.left-=i,t.right-=i;break;case"+y":t.top+=i,t.bottom+=i;break;case"-y":t.top-=i,t.bottom-=i}}function U(t,e){return e.top>=0&&e.bottom<=t.height&&e.left>=0&&e.right<=t.width}function Q(t,e){return{top:e.top/t.height,left:e.left/t.width,right:(t.width-e.right)/t.width,bottom:(t.height-e.bottom)/t.height}}function Z(t,e){return e.top=e.top*t.height,e.left=e.left*t.width,e.right=t.width-e.right*t.width,e.bottom=t.height-e.bottom*t.height,e}let tt=["top","left","right","bottom"];function te(t,e,i,r){let s=Q(e,i);for(let e of tt)P(t,`${r}-${e}`,100*s[e]+"%")}function ti(t,e,i,r){let s=1,n,l={...e};for(let h=0;h<r.length;h++){for(var a,o;function(t,e,i){switch(i){case"+x":return e.left<0;case"-x":return e.right>t.width;case"+y":return e.top<0;case"-y":return e.bottom>t.height}}(t,e,r[h])||U(t,e)&&function(t,e){for(let r=0;r<e.length;r++){var i;if(i=e[r],t.left<=i.right&&t.right>=i.left&&t.top<=i.bottom&&t.bottom>=i.top)return e[r]}return null}(e,i);)K(e,r[h],1);if(U(t,e))return e;let c=(a=t,o=e,Math.max(0,Math.min(a.width,o.right)-Math.max(0,o.left))*Math.max(0,Math.min(a.height,o.bottom)-Math.max(0,o.top))/(a.height*a.width));s>c&&(n={...e},s=c),e={...l}}return n||l}let tr=Symbol(0),ts=["-y","+y","-x","+x"];class tn{overlay;z;A=0;C="ltr";B=[];D=!1;E;j=new Map;l=new Map;get dir(){return this.C}set dir(t){this.C=t,_(this.overlay,"dir",t)}get currentTime(){return this.A}set currentTime(t){this.A=t,this.update()}constructor(t,e){this.overlay=t,this.dir=e?.dir??"ltr",t.setAttribute("translate","yes"),t.setAttribute("aria-live","off"),t.setAttribute("aria-atomic","true"),q(t,"captions"),this.G(),this.E=new ResizeObserver(this.I.bind(this)),this.E.observe(t)}changeTrack({regions:t,cues:e}){for(let i of(this.reset(),this.J(t),e))this.l.set(i,null);this.update()}addCue(t){this.l.set(t,null),this.update()}removeCue(t){this.l.delete(t),this.update()}update(t=!1){this.H(t)}reset(){this.l.clear(),this.j.clear(),this.B=[],this.overlay.textContent=""}destroy(){this.reset(),this.E.disconnect()}I(){this.D=!0,this.K()}K=(function(t,e){let i=null,r;function s(){n(),t(...r),r=void 0}function n(){clearTimeout(i),i=null}return function(){r=[].slice.call(arguments),n(),i=setTimeout(s,e)}})(()=>{for(let t of(this.D=!1,this.G(),this.j.values()))t[G]=null;for(let t of this.l.values())t&&(t[G]=null);this.H(!0)},50);G(){this.z=J(this.overlay),P(this.overlay,"overlay-width",this.z.width+"px"),P(this.overlay,"overlay-height",this.z.height+"px")}H(t=!1){if(!this.l.size||this.D)return;let e,i=[...this.l.keys()].filter(t=>this.A>=t.startTime&&this.A<=t.endTime).sort((t,e)=>t.startTime!==e.startTime?t.startTime-e.startTime:t.endTime-e.endTime),r=i.map(t=>t.region);for(let s=0;s<this.B.length;s++){if(e=this.B[s],i[s]===e)continue;if(e.region&&!r.includes(e.region)){let i=this.j.get(e.region.id);i&&(i.removeAttribute("data-active"),t=!0)}let n=this.l.get(e);n&&(n.remove(),t=!0)}for(let r=0;r<i.length;r++){e=i[r];let s=this.l.get(e);s||this.l.set(e,s=this.L(e));let n=this.F(e)&&this.j.get(e.region.id);n&&!n.hasAttribute("data-active")&&(requestAnimationFrame(()=>_(n,"active")),t=!0),s.isConnected||((n||this.overlay).append(s),t=!0)}if(t){let t=[],r=new Set;for(let s=i.length-1;s>=0;s--){if(e=i[s],r.has(e.region||e))continue;let n=this.F(e),l=n?this.j.get(e.region.id):this.l.get(e);n?t.push(function(t,e,i,r){let s=Array.from(i.querySelectorAll('[data-part="cue-display"]')),n=0,l=Math.max(0,s.length-e.lines);for(let t=s.length-1;t>=l;t--)n+=s[t].offsetHeight;P(i,"region-height",n+"px"),i[G]||(i[G]=Q(t,J(i)));let a={...i[G]};return(a=Z(t,a)).width=i.clientWidth,a.height=n,a.right=a.left+a.width,a.bottom=a.top+n,a=ti(t,a,r,ts),te(i,t,a,"region"),a}(this.z,e.region,l,t)):t.push(function(t,e,i,r){let s=i.firstElementChild,n=function(t){if("auto"===t.line)if(!t.snapToLines)return 100;else return -1;return t.line}(e),l,a=[];if(i[G]||(i[G]=function(t,e){let i=J(e),r=function(t){let e={};for(let i of tt)e[i]=parseFloat(t.style.getPropertyValue(`--cue-${i}`));return e}(e);if(e[tr]=!1,r.top&&(i.top=r.top,i.bottom=r.top+i.height,e[tr]="top"),r.bottom){let s=t.height-r.bottom;i.top=s-i.height,i.bottom=s,e[tr]="bottom"}return r.left&&(i.left=r.left),r.right&&(i.right=t.width-r.right),Q(t,i)}(t,i)),l=Z(t,{...i[G]}),i[tr])a=["top"===i[tr]?"+y":"-y","+x","-x"];else if(e.snapToLines){let i;switch(e.vertical){case"":a=["+y","-y"],i="height";break;case"rl":a=["+x","-x"],i="width";break;case"lr":a=["-x","+x"],i="width"}let r=parseFloat(getComputedStyle(s).lineHeight)||0,o=r*Math.round(n),h=t[i]+r,c=a[0];Math.abs(o)>h&&(o=Math.ceil(h/r)*r*(o<0?-1:1)),n<0&&(o+=""===e.vertical?t.height:t.width,a=a.reverse()),K(l,c,o)}else{let i=""===e.vertical,r=i?"+y":"+x",s=i?l.height:l.width;K(l,r,(i?t.height:t.width)*n/100),K(l,r,"center"===e.lineAlign?s/2:"end"===e.lineAlign?s:0),a=i?["-y","+y","-x","+x"]:["-x","+x","-y","+y"]}return l=ti(t,l,r,a),te(i,t,l,"cue"),l}(this.z,e,l,t)),r.add(n?e.region:e)}}D(this.overlay,this.A),this.B=i}J(t){if(t)for(let e of t){let t=this.M(e);this.j.set(e.id,t),this.overlay.append(t)}}M(t){let e=document.createElement("div");return q(e,"region"),_(e,"id",t.id),_(e,"scroll",t.scroll),P(e,"region-width",t.width+"%"),P(e,"region-anchor-x",t.regionAnchorX),P(e,"region-anchor-y",t.regionAnchorY),P(e,"region-viewport-anchor-x",t.viewportAnchorX),P(e,"region-viewport-anchor-y",t.viewportAnchorY),P(e,"region-lines",t.lines),e}L(t){let e=document.createElement("div"),i=function(t){if("auto"===t.position)switch(t.align){case"start":case"left":return 0;case"right":case"end":return 100;default:return 50}return t.position}(t),r=function(t,e){if("auto"===t.positionAlign)switch(t.align){case"start":return"ltr"===e?"line-left":"line-right";case"end":return"ltr"===e?"line-right":"line-left";case"center":return"center";default:return`line-${t.align}`}return t.positionAlign}(t,this.C);if(q(e,"cue-display"),""!==t.vertical&&_(e,"vertical"),P(e,"cue-text-align",t.align),t.style)for(let i of Object.keys(t.style))e.style.setProperty(i,t.style[i]);if(this.F(t))P(e,"cue-offset",`${i-("line-right"===r?100:50*("center"===r))}%`);else if(P(e,"cue-writing-mode",""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl"),!t.style?.["--cue-width"]){let s=i;"line-left"===r?s=100-i:"center"===r&&i<=50?s=2*i:"center"===r&&i>50&&(s=(100-i)*2);let n=t.size<s?t.size:s;""===t.vertical?P(e,"cue-width",n+"%"):P(e,"cue-height",n+"%")}let s=document.createElement("div");return q(s,"cue"),t.id&&_(s,"id",t.id),s.innerHTML=X(t),e.append(s),e}F(t){return t.region&&100===t.size&&""===t.vertical&&"auto"===t.line}}},1298:(t,e,i)=>{i.r(e),i.d(e,{CaptionsRenderer:()=>r.C,ParseError:()=>r.P,ParseErrorCode:()=>r.c,TextCue:()=>r.T,VTTCue:()=>r.b,VTTRegion:()=>r.h,createVTTCueTemplate:()=>r.i,parseByteStream:()=>r.e,parseResponse:()=>r.d,parseText:()=>r.f,parseTextStream:()=>r.g,parseVTTTimestamp:()=>r.p,renderVTTCueString:()=>r.r,renderVTTTokensString:()=>r.j,tokenizeVTTCue:()=>r.t,updateTimedVTTCueNodes:()=>r.u});var r=i(717)}}]);