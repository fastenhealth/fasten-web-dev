"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{9045:(e,t,a)=>{a.r(t),a.d(t,{getCastContext:()=>d,getCastErrorMessage:()=>w,getCastSession:()=>u,getCastSessionMedia:()=>g,hasActiveCastSession:()=>p,listenCastContextEvent:()=>v,loader:()=>N});var r=a(4971),o=a(4096),n=a(6266),s=a(3169),i=a(3893),l=a(1386),c=a(8979);function h(){return d().getCastState()===cast.framework.CastState.CONNECTED}function d(){return window.cast.framework.CastContext.getInstance()}function u(){return d().getCurrentSession()}function g(){var e;return null==(e=u())?void 0:e.getSessionObj().media[0]}function p(e){var t;return(null==(t=g())?void 0:t.media.contentId)===(null==e?void 0:e.src)}function w(e){return"Google Cast Error Code: ".concat(e)}function v(e,t){return(0,c.listenEvent)(d(),e,t)}var _=new WeakMap,f=new WeakSet,C=new WeakSet,m=new WeakSet,y=new WeakSet,E=new WeakSet;class k{get cast(){return d()}mediaType(){return"video"}canPlay(e){return l.G_&&!l.pz&&(0,l.jx)(e)}async prompt(e){var t,a;let o,i,l;try{o=await (0,s._)(this,f,S).call(this,e),(0,r._)(this,_)||((0,n._)(this,_,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController((0,r._)(this,_))),i=e.player.createEvent("google-cast-prompt-open",{trigger:o}),e.player.dispatchEvent(i),(0,s._)(this,y,P).call(this,e,"connecting",i),await (0,s._)(this,C,b).call(this,(0,c.peek)(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:null==(t=u())?void 0:t.getCastDevice().friendlyName}),h()&&(0,s._)(this,y,P).call(this,e,"connected",i)}catch(a){let t=a instanceof Error?a:(0,s._)(this,E,I).call(this,(a+"").toUpperCase(),"Prompt failed.");throw l=e.player.createEvent("google-cast-prompt-error",{detail:t,trigger:null!=i?i:o,cancelable:!0}),e.player.dispatch(l),(0,s._)(this,y,P).call(this,e,h()?"connected":"disconnected",l),t}finally{e.player.dispatch("google-cast-prompt-close",{trigger:null!=(a=null!=l?l:i)?a:o})}}async load(e){if(l.X3)throw Error("[vidstack] can not load google cast provider server-side");if(!(0,r._)(this,_))throw Error("[vidstack] google cast player was not initialized");return new(await a.e(861).then(a.bind(a,6861))).GoogleCastProvider((0,r._)(this,_),e)}constructor(){(0,i._)(this,f),(0,i._)(this,C),(0,i._)(this,m),(0,i._)(this,y),(0,i._)(this,E),(0,o._)(this,_,{writable:!0,value:void 0}),this.name="google-cast"}}async function S(e){var t,a,r;if(null==(t=window.cast)?void 0:t.framework)return;let o=e.player.createEvent("google-cast-load-start");e.player.dispatch(o),await (0,l.k0)("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),await customElements.whenDefined("google-cast-launcher");let n=e.player.createEvent("google-cast-loaded",{trigger:o});if(e.player.dispatch(n),!(null==(r=window.chrome)||null==(a=r.cast)?void 0:a.isAvailable))throw(0,s._)(this,E,I).call(this,"CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return n}async function b(e){(0,s._)(this,m,A).call(this,e);let t=await this.cast.requestSession();if(t)throw(0,s._)(this,E,I).call(this,t.toUpperCase(),w(t))}function A(e){var t;null==(t=this.cast)||t.setOptions({...{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0},...e})}function P(e,t,a){e.notify("remote-playback-change",{type:"google-cast",state:t},a)}function I(e,t){let a=Error(t);return a.code=e,a}var N=Object.freeze({__proto__:null,GoogleCastLoader:k})}}]);