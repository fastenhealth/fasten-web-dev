"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{9011:(t,i,e)=>{e.r(i),e.d(i,{HLSProvider:()=>t_});var s=e(4971),n=e(4096),a=e(6266),l=e(3169),h=e(3893),r=e(8979),o=e(1386);e(2115);let _=t=>(0,r.camelToKebabCase)(t);var c=new WeakMap,d=new WeakMap,u=new WeakMap,v=new WeakMap,p=new WeakMap,w=new WeakSet,f=new WeakSet,k=new WeakSet,S=new WeakSet,b=new WeakSet,g=new WeakSet,E=new WeakSet,y=new WeakSet,W=new WeakSet,T=new WeakSet,L=new WeakSet,m=new WeakSet,M=new WeakSet,D=new WeakSet,O=new WeakSet;class x{get instance(){return(0,s._)(this,u)}setup(t){let{streamType:i}=(0,s._)(this,d).$state,e=(0,r.peek)(i).includes("live"),n=(0,r.peek)(i).includes("ll-");(0,a._)(this,u,new t({lowLatencyMode:n,backBufferLength:n?4:e?8:void 0,renderTextTracksNatively:!1,...this.config}));let h=(0,l._)(this,S,A).bind(this);for(let i of Object.values(t.Events))(0,s._)(this,u).on(i,h);for(let i of((0,s._)(this,u).on(t.Events.ERROR,(0,l._)(this,L,q).bind(this)),(0,s._)(this,p)))i((0,s._)(this,u));(0,s._)(this,d).player.dispatch("hls-instance",{detail:(0,s._)(this,u)}),(0,s._)(this,u).attachMedia((0,s._)(this,c)),(0,s._)(this,u).on(t.Events.AUDIO_TRACK_SWITCHED,(0,l._)(this,E,R).bind(this)),(0,s._)(this,u).on(t.Events.LEVEL_SWITCHED,(0,l._)(this,y,P).bind(this)),(0,s._)(this,u).on(t.Events.LEVEL_LOADED,(0,l._)(this,T,V).bind(this)),(0,s._)(this,u).on(t.Events.LEVEL_UPDATED,(0,l._)(this,W,$).bind(this)),(0,s._)(this,u).on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(0,l._)(this,b,N).bind(this)),(0,s._)(this,u).on(t.Events.CUES_PARSED,(0,l._)(this,g,j).bind(this)),(0,s._)(this,d).qualities[o.kW.enableAuto]=(0,l._)(this,M,F).bind(this),(0,r.listenEvent)((0,s._)(this,d).qualities,"change",(0,l._)(this,D,B).bind(this)),(0,r.listenEvent)((0,s._)(this,d).audioTracks,"change",(0,l._)(this,O,K).bind(this)),(0,a._)(this,v,(0,r.effect)((0,l._)(this,f,I).bind(this)))}onInstance(t){return(0,s._)(this,p).add(t),()=>(0,s._)(this,p).delete(t)}loadSource(t){var i;(0,r.isString)(t.src)&&(null==(i=(0,s._)(this,u))||i.loadSource(t.src))}destroy(){var t,i;null==(t=(0,s._)(this,u))||t.destroy(),(0,a._)(this,u,null),null==(i=(0,s._)(this,v))||i.call(this),(0,a._)(this,v,null)}constructor(t,i){(0,h._)(this,w),(0,h._)(this,f),(0,h._)(this,k),(0,h._)(this,S),(0,h._)(this,b),(0,h._)(this,g),(0,h._)(this,E),(0,h._)(this,y),(0,h._)(this,W),(0,h._)(this,T),(0,h._)(this,L),(0,h._)(this,m),(0,h._)(this,M),(0,h._)(this,D),(0,h._)(this,O),(0,n._)(this,c,{writable:!0,value:void 0}),(0,n._)(this,d,{writable:!0,value:void 0}),(0,n._)(this,u,{writable:!0,value:void 0}),(0,n._)(this,v,{writable:!0,value:void 0}),(0,n._)(this,p,{writable:!0,value:void 0}),(0,a._)(this,u,null),(0,a._)(this,v,null),this.config={},(0,a._)(this,p,new Set),(0,a._)(this,c,t),(0,a._)(this,d,i)}}function H(t,i){return new r.DOMEvent(_(t),{detail:i})}function I(){if(!(0,s._)(this,d).$state.live())return;let t=new o.e8((0,l._)(this,k,C).bind(this));return t.start(),t.stop.bind(t)}function C(){var t,i;(0,s._)(this,d).$state.liveSyncPosition.set(null!=(i=null==(t=(0,s._)(this,u))?void 0:t.liveSyncPosition)?i:1/0)}function A(t,i){var e;null==(e=(0,s._)(this,d).player)||e.dispatch((0,l._)(this,w,H).call(this,t,i))}function N(t,i){let e=(0,l._)(this,w,H).call(this,t,i),n=-1;for(let t=0;t<i.tracks.length;t++){var a;let l=i.tracks[t],h=null!=(a=l.subtitleTrack)?a:l.closedCaptions,r=new o.to({id:"hls-".concat(l.kind,"-").concat(t),src:null==h?void 0:h.url,label:l.label,language:null==h?void 0:h.lang,kind:l.kind,default:l.default});r[o.Hp.readyState]=2,r[o.Hp.onModeChange]=()=>{"showing"===r.mode?((0,s._)(this,u).subtitleTrack=t,n=t):n===t&&((0,s._)(this,u).subtitleTrack=-1,n=-1)},(0,s._)(this,d).textTracks.add(r,e)}}function j(t,i){var e;let n=null==(e=(0,s._)(this,u))?void 0:e.subtitleTrack,a=(0,s._)(this,d).textTracks.getById("hls-".concat(i.type,"-").concat(n));if(!a)return;let h=(0,l._)(this,w,H).call(this,t,i);for(let t of i.cues)t.positionAlign="auto",a.addCue(t,h)}function R(t,i){let e=(0,s._)(this,d).audioTracks[i.id];if(e){let n=(0,l._)(this,w,H).call(this,t,i);(0,s._)(this,d).audioTracks[o.jH.select](e,!0,n)}}function P(t,i){let e=(0,s._)(this,d).qualities[i.level];if(e){let n=(0,l._)(this,w,H).call(this,t,i);(0,s._)(this,d).qualities[o.jH.select](e,!0,n)}}function $(t,i){i.details.totalduration>0&&(0,s._)(this,d).$state.inferredLiveDVRWindow.set(i.details.totalduration)}function V(t,i){if((0,s._)(this,d).$state.canPlay())return;let{type:e,live:n,totalduration:a,targetduration:h}=i.details,_=(0,l._)(this,w,H).call(this,t,i);(0,s._)(this,d).notify("stream-type-change",n?"EVENT"===e&&Number.isFinite(a)&&h>=10?"live:dvr":"live":"on-demand",_),(0,s._)(this,d).notify("duration-change",a,_);let c=(0,s._)(this,u).media;for(let t of(-1===(0,s._)(this,u).currentLevel&&(0,s._)(this,d).qualities[o.kW.setAuto](!0,_),(0,s._)(this,u).audioTracks)){let i={id:t.id.toString(),label:t.name,language:t.lang||"",kind:"main"};(0,s._)(this,d).audioTracks[o.jH.add](i,_)}for(let t of(0,s._)(this,u).levels){var v,p;let i={id:null!=(p=null==(v=t.id)?void 0:v.toString())?p:t.height+"p",width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate};(0,s._)(this,d).qualities[o.jH.add](i,_)}c.dispatchEvent(new r.DOMEvent("canplay",{trigger:_}))}function q(t,i){if(i.fatal)if("mediaError"===i.type){var e;null==(e=(0,s._)(this,u))||e.recoverMediaError()}else(0,l._)(this,m,U).call(this,i.error)}function U(t){(0,s._)(this,d).notify("error",{message:t.message,code:1,error:t})}function F(){(0,s._)(this,u)&&((0,s._)(this,u).currentLevel=-1)}function B(){let{qualities:t}=(0,s._)(this,d);(0,s._)(this,u)&&!t.auto&&((0,s._)(this,u)[t.switch+"Level"]=t.selectedIndex,o.G_&&((0,s._)(this,c).currentTime=(0,s._)(this,c).currentTime))}function K(){let{audioTracks:t}=(0,s._)(this,d);(0,s._)(this,u)&&(0,s._)(this,u).audioTrack!==t.selectedIndex&&((0,s._)(this,u).audioTrack=t.selectedIndex)}var G=new WeakMap,X=new WeakMap,Y=new WeakMap,z=new WeakSet,J=new WeakSet,Q=new WeakSet,Z=new WeakSet;class tt{constructor(t,i,e){(0,h._)(this,z),(0,h._)(this,J),(0,h._)(this,Q),(0,h._)(this,Z),(0,n._)(this,G,{writable:!0,value:void 0}),(0,n._)(this,X,{writable:!0,value:void 0}),(0,n._)(this,Y,{writable:!0,value:void 0}),(0,a._)(this,G,t),(0,a._)(this,X,i),(0,a._)(this,Y,e),(0,l._)(this,z,ti).call(this)}}async function ti(){let t={onLoadStart:(0,l._)(this,J,te).bind(this),onLoaded:(0,l._)(this,Q,ts).bind(this),onLoadError:(0,l._)(this,Z,tn).bind(this)},i=await tl((0,s._)(this,G),t);return((0,r.isUndefined)(i)&&!(0,r.isString)((0,s._)(this,G))&&(i=await ta((0,s._)(this,G),t)),i)?i.isSupported()?i:((0,s._)(this,X).player.dispatch(new r.DOMEvent("hls-unsupported")),(0,s._)(this,X).notify("error",{message:"[vidstack] `hls.js` is not supported in this environment",code:4}),null):null}function te(){(0,s._)(this,X).player.dispatch(new r.DOMEvent("hls-lib-load-start"))}function ts(t){(0,s._)(this,X).player.dispatch(new r.DOMEvent("hls-lib-loaded",{detail:t})),(0,s._)(this,Y).call(this,t)}function tn(t){let i=(0,o.rv)(t);(0,s._)(this,X).player.dispatch(new r.DOMEvent("hls-lib-load-error",{detail:i})),(0,s._)(this,X).notify("error",{message:i.message,code:4,error:i})}async function ta(t){var i,e,s,n,a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isUndefined)(t)){if(null==(i=l.onLoadStart)||i.call(l),t.prototype&&t.prototype!==Function)return null==(e=l.onLoaded)||e.call(l,t),t;try{let i=null==(s=await t())?void 0:s.default;if(i&&i.isSupported)null==(n=l.onLoaded)||n.call(l,i);else throw Error("");return i}catch(t){null==(a=l.onLoadError)||a.call(l,t)}}}async function tl(t){var i,e,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,r.isString)(t)){null==(i=n.onLoadStart)||i.call(n);try{if(await (0,o.k0)(t),!(0,r.isFunction)(window.Hls))throw Error("");let i=window.Hls;return null==(e=n.onLoaded)||e.call(n,i),i}catch(t){null==(s=n.onLoadError)||s.call(n,t)}}}var th=new WeakMap,tr=new WeakMap,to=new WeakMap;class t_ extends o.Nw{get ctor(){return(0,s._)(this,th)}get instance(){return(0,s._)(this,tr).instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return(0,s._)(this,tr).config}set config(t){(0,s._)(this,tr).config=t}get library(){return(0,s._)(this,to)}set library(t){(0,a._)(this,to,t)}preconnect(){(0,r.isString)((0,s._)(this,to))&&(0,o.TB)((0,s._)(this,to))}setup(){super.setup(),new tt((0,s._)(this,to),this.ctx,t=>{(0,a._)(this,th,t),(0,s._)(this,tr).setup(t),this.ctx.notify("provider-setup",this);let i=(0,r.peek)(this.ctx.$state.source);i&&this.loadSource(i)})}async loadSource(t,i){if(!(0,r.isString)(t.src))return void this.removeSource();this.media.preload=i||"",this.appendSource(t,"application/x-mpegurl"),(0,s._)(this,tr).loadSource(t),this.currentSrc=t}onInstance(t){let i=(0,s._)(this,tr).instance;return i&&t(i),(0,s._)(this,tr).onInstance(t)}destroy(){(0,s._)(this,tr).destroy()}constructor(...t){super(...t),(0,n._)(this,th,{writable:!0,value:void 0}),(0,n._)(this,tr,{writable:!0,value:void 0}),(0,n._)(this,to,{writable:!0,value:void 0}),this.$$PROVIDER_TYPE="HLS",(0,a._)(this,th,null),(0,a._)(this,tr,new x(this.video,this.ctx)),(0,a._)(this,to,"".concat("https://cdn.jsdelivr.net","/npm/hls.js@^1.5.0/dist/hls",".min.js"))}}t_.supported=(0,o.m0)()}}]);