"use strict";exports.id=392,exports.ids=[344,392],exports.modules={4344:(e,t,i)=>{i.d(t,{findYouTubePoster:()=>n,resolveYouTubeVideoId:()=>a});let s=/(?:youtu\.be|youtube|youtube\.com|youtube-nocookie\.com)(?:\/shorts)?\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|)((?:\w|-){11})/,r=new Map,o=new Map;function a(e){return e.match(s)?.[1]}async function n(e,t){if(r.has(e))return r.get(e);if(o.has(e))return o.get(e);let i=new Promise(async i=>{for(let n of["maxresdefault","sddefault","hqdefault"])for(let h of[!0,!1]){var s,o,a;let d=(s=e,o=n,a=h,`https://i.ytimg.com/${a?"vi_webp":"vi"}/${s}/${o}.${a?"webp":"jpg"}`);if((await fetch(d,{mode:"no-cors",signal:t.signal})).status<400){r.set(e,d),i(d);return}}}).catch(()=>"").finally(()=>o.delete(e));return o.set(e,i),i}},4392:(e,t,i)=>{i.r(t),i.d(t,{YouTubeProvider:()=>h});var s=i(5247),r=i(1813),o=i(8752),a=i(4344);i(3210);let n={Ended:0,Playing:1,Paused:2,Buffering:3,Cued:5};class h extends o.h{#e;#t;#i;#s;#r;#o;#a;constructor(e,t){super(e),this.$$PROVIDER_TYPE="YOUTUBE",this.scope=(0,s.createScope)(),this.#t=(0,s.signal)(""),this.#i=-1,this.#s=null,this.#r=-1,this.#o=!1,this.#a=new Map,this.language="en",this.color="red",this.cookies=!1,this.#e=t}get currentSrc(){return this.#s}get type(){return"youtube"}get videoId(){return this.#t()}preconnect(){(0,r.TB)(this.getOrigin())}setup(){super.setup(),(0,s.effect)(this.#n.bind(this)),this.#e.notify("provider-setup",this)}destroy(){for(let e of(this.#h(),this.#a.values()))for(let{reject:t}of e)t("provider destroyed");this.#a.clear()}async play(){return this.#d("playVideo")}#c(e){this.#u("playVideo")?.reject(e)}async pause(){return this.#d("pauseVideo")}#l(e){this.#u("pauseVideo")?.reject(e)}setMuted(e){e?this.#d("mute"):this.#d("unMute")}setCurrentTime(e){this.#d("seekTo",e),this.#e.notify("seeking",e)}setVolume(e){this.#d("setVolume",100*e)}setPlaybackRate(e){this.#d("setPlaybackRate",e)}async loadSource(e){if(!(0,s.isString)(e.src)){this.#s=null,this.#t.set("");return}let t=(0,a.resolveYouTubeVideoId)(e.src);this.#t.set(t??""),this.#s=e}getOrigin(){return this.cookies?"https://www.youtube.com":"https://www.youtube-nocookie.com"}#n(){this.#h();let e=this.#t();if(!e)return void this.src.set("");this.src.set(`${this.getOrigin()}/embed/${e}`),this.#e.notify("load-start")}buildParams(){let{keyDisabled:e}=this.#e.$props,{muted:t,playsInline:i,nativeControls:s}=this.#e.$state,r=s();return{rel:0,autoplay:0,cc_lang_pref:this.language,cc_load_policy:r?1:void 0,color:this.color,controls:+!!r,disablekb:!r||e()?1:0,enablejsapi:1,fs:1,hl:this.language,iv_load_policy:r?1:3,mute:+!!t(),playsinline:+!!i()}}#d(e,t){let i=(0,s.deferredPromise)(),r=this.#a.get(e);return r||this.#a.set(e,r=[]),r.push(i),this.postMessage({event:"command",func:e,args:t?[t]:void 0}),i.promise}onLoad(){window.setTimeout(()=>this.postMessage({event:"listening"}),100)}#g(e){this.#e.notify("loaded-metadata"),this.#e.notify("loaded-data"),this.#e.delegate.ready(void 0,e)}#m(e){this.#u("pauseVideo")?.resolve(),this.#e.notify("pause",void 0,e)}#p(e,t){let{duration:i,realCurrentTime:s}=this.#e.$state,r=this.#i===n.Ended,o=r?i():e;this.#e.notify("time-change",o,t),!r&&Math.abs(o-s())>1&&this.#e.notify("seeking",o,t)}#f(e,t,i){let s={buffered:new r.zJ(0,e),seekable:t};this.#e.notify("progress",s,i);let{seeking:o,realCurrentTime:a}=this.#e.$state;o()&&e>a()&&this.#y(i)}#y(e){let{paused:t,realCurrentTime:i}=this.#e.$state;window.clearTimeout(this.#r),this.#r=window.setTimeout(()=>{this.#e.notify("seeked",i(),e),this.#r=-1},100*!!t())}#v(e){let{seeking:t}=this.#e.$state;t()&&this.#y(e),this.#e.notify("pause",void 0,e),this.#e.notify("end",void 0,e)}#b(e,t){let{paused:i,seeking:s}=this.#e.$state,r=e===n.Playing,o=e===n.Buffering,a=this.#w("playVideo"),h=i()&&(o||r);if(o&&this.#e.notify("waiting",void 0,t),s()&&r&&this.#y(t),this.#o&&r){this.pause(),this.#o=!1,this.setMuted(this.#e.$state.muted());return}if(!a&&h){this.#o=!0,this.setMuted(!0);return}switch(h&&(this.#u("playVideo")?.resolve(),this.#e.notify("play",void 0,t)),e){case n.Cued:this.#g(t);break;case n.Playing:this.#e.notify("playing",void 0,t);break;case n.Paused:this.#m(t);break;case n.Ended:this.#v(t)}this.#i=e}onMessage({info:e},t){if(!e)return;let{title:i,intrinsicDuration:o,playbackRate:a}=this.#e.$state;if((0,s.isObject)(e.videoData)&&e.videoData.title!==i()&&this.#e.notify("title-change",e.videoData.title,t),(0,s.isNumber)(e.duration)&&e.duration!==o()){if((0,s.isNumber)(e.videoLoadedFraction)){let i=e.progressState?.loaded??e.videoLoadedFraction*e.duration,s=new r.zJ(0,e.duration);this.#f(i,s,t)}this.#e.notify("duration-change",e.duration,t)}if((0,s.isNumber)(e.playbackRate)&&e.playbackRate!==a()&&this.#e.notify("rate-change",e.playbackRate,t),e.progressState){let{current:i,seekableStart:s,seekableEnd:a,loaded:n,duration:h}=e.progressState;this.#p(i,t),this.#f(n,new r.zJ(s,a),t),h!==o()&&this.#e.notify("duration-change",h,t)}if((0,s.isNumber)(e.volume)&&(0,s.isBoolean)(e.muted)&&!this.#o){let i={muted:e.muted,volume:e.volume/100};this.#e.notify("volume-change",i,t)}(0,s.isNumber)(e.playerState)&&e.playerState!==this.#i&&this.#b(e.playerState,t)}#h(){this.#i=-1,this.#r=-1,this.#o=!1}#u(e){return this.#a.get(e)?.shift()}#w(e){return!!this.#a.get(e)?.length}}},8752:(e,t,i)=>{i.d(t,{h:()=>o});var s=i(1813),r=i(5247);class o{#x;get iframe(){return this.#x}constructor(e){this.src=(0,r.signal)(""),this.referrerPolicy=null,this.#x=e,e.setAttribute("frameBorder","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),null!==this.referrerPolicy&&e.setAttribute("referrerpolicy",this.referrerPolicy)}setup(){(0,r.listenEvent)(window,"message",this.#P.bind(this)),(0,r.listenEvent)(this.#x,"load",this.onLoad.bind(this)),(0,r.effect)(this.#k.bind(this))}#k(){let e=this.src();if(!e.length)return void this.#x.setAttribute("src","");let t=(0,r.peek)(()=>this.buildParams());this.#x.setAttribute("src",(0,s.xF)(e,t))}postMessage(e,t){s.X3||this.#x.contentWindow?.postMessage(JSON.stringify(e),t??"*")}#P(e){let t=this.getOrigin();if((null===e.source||e.source===this.#x?.contentWindow)&&(!(0,r.isString)(t)||t===e.origin)){try{let t=JSON.parse(e.data);t&&this.onMessage(t,e);return}catch(e){}e.data&&this.onMessage(e.data,e)}}}}};